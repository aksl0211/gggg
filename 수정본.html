<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Running JavaScript</title>
    <link rel="stylesheet" href="my-style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
     integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  </head>
  <body>
    <div class="tableFixHead">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Line No.</th>
          <th scope="col">date</th>
          <th scope="col">KT</th>
          <th scope="col">LG전자</th>
          <th scope="col">삼성생명</th>
          <th scope="col">네이버</th>
          <th scope="col">카카오</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">1</th>
          <td>2018-09-03</td>
          <td>28900</td>
          <td>76700</td>
          <td>92400</td>
          <td>754000</td>
          <td>121500</td>
        </tr>
        <tr>
          <th scope="row">2</th>
          <td>2018-09-04</td>
          <td>28700</td>
          <td>78100</td>
          <td>92100</td>
          <td>755000</td>
          <td>122000</td>
        </tr>
        <tr>
          <th scope="row">3</th>
          <td>2018-09-05</td>
          <td>28900</td>
          <td>76200</td>
          <td>90900</td>
          <td>736000</td>
          <td>121000</td>
        </tr>
        <tr>
          <th scope="row">4</th>
          <td>2018-09-06</td>
          <td>29000</td>
          <td>74400</td>
          <td>91800</td>
          <td>730000</td>
          <td>120000</td>
        </tr>
        <tr>
          <th scope="row">5</th>
          <td>2018-09-07</td>
          <td>28950</td>
          <td>74300</td>
          <td>93000</td>
          <td>732000</td>
          <td>120000</td>
        </tr>
        <tr>
          <th scope="row">6</th>
          <td>2018-09-10</td>
          <td>28450</td>
          <td>73100</td>
          <td>92600</td>
          <td>725000</td>
          <td>119000</td>
        </tr>
        <tr>
          <th scope="row">7</th>
          <td>2018-09-11</td>
          <td>28650</td>
          <td>72800</td>
          <td>92000</td>
          <td>726000</td>
          <td>116500</td>
        </tr>
        <tr>
          <th scope="row">8</th>
          <td>2018-09-12</td>
          <td>29150</td>
          <td>72100</td>
          <td>91600</td>
          <td>730000</td>
          <td>120000</td>
        </tr>
        <tr>
          <th scope="row">9</th>
          <td>2018-09-13</td>
          <td>28850</td>
          <td>71500</td>
          <td>91600</td>
          <td>723000</td>
          <td>121000</td>
        </tr>
        <tr>
          <th scope="row">10</th>
          <td>2018-09-14</td>
          <td>29150</td>
          <td>72100</td>
          <td>92000</td>
          <td>730000</td>
          <td>120000</td>
        </tr>
        <tr>
          <th scope="row">11</th>
          <td>2018-09-17</td>
          <td>29700</td>
          <td>71900</td>
          <td>91000</td>
          <td>728000</td>
          <td>121500</td>
        </tr>
        <tr>
          <th scope="row">12</th>
          <td>2018-09-18</td>
          <td>29900</td>
          <td>69000</td>
          <td>91100</td>
          <td>725000</td>
          <td>120500</td>
        </tr>
        <tr>
          <th scope="row">13</th>
          <td>2018-09-19</td>
          <td>29600</td>
          <td>68200</td>
          <td>90400</td>
          <td>731000</td>
          <td>117000</td>
        </tr>
        <tr>
          <th scope="row">14</th>
          <td>2018-09-20</td>
          <td>29700</td>
          <td>69000</td>
          <td>91700</td>
          <td>731000</td>
          <td>117500</td>
        </tr>
        <tr>
          <th scope="row">15</th>
          <td>2018-09-21</td>
          <td>29200</td>
          <td>69500</td>
          <td>96000</td>
          <td>725000</td>
          <td>118500</td>
        </tr>
        <tr>
          <th scope="row">16</th>
          <td>2018-09-27</td>
          <td>29950</td>
          <td>69600</td>
          <td>96000</td>
          <td>713000</td>
          <td>120500</td>
        </tr>
        <tr>
          <th scope="row">17</th>
          <td>2018-09-28</td>
          <td>30150</td>
          <td>71000</td>
          <td>97300</td>
          <td>716000</td>
          <td>119000</td>
        </tr>
        <tr>
          <th scope="row">18</th>
          <td>2018-10-01</td>
          <td>30050</td>
          <td>71100</td>
          <td>96100</td>
          <td>713000</td>
          <td>119500</td>
        </tr>
        <tr>
          <th scope="row">19</th>
          <td>2018-10-02</td>
          <td>29500</td>
          <td>69900</td>
          <td>96100</td>
          <td>689000</td>
          <td>115500</td>
        </tr>
        <tr>
          <th scope="row">20</th>
          <td>2018-10-04</td>
          <td>29800</td>
          <td>69000</td>
          <td>96500</td>
          <td>695000</td>
          <td>112000</td>
        </tr>
        <tr>
          <th scope="row">21</th>
          <td>2018-10-05</td>
          <td>30000</td>
          <td>70500</td>
          <td>96900</td>
          <td>704000</td>
          <td>109000</td>
        </tr>
        <tr>
          <th scope="row">22</th>
          <td>2018-10-08</td>
          <td>29900</td>
          <td>67800</td>
          <td>94600</td>
          <td>704000</td>
          <td>107500</td>
        </tr>
        <tr>
          <th scope="row">23</th>
          <td>2018-10-10</td>
          <td>30000</td>
          <td>65200</td>
          <td>94800</td>
          <td>704000</td>
          <td>104000</td>
        </tr>
        <tr>
          <th scope="row">24</th>
          <td>2018-10-11</td>
          <td>29000</td>
          <td>62300</td>
          <td>90900</td>
          <td>704000</td>
          <td>98500</td>
        </tr>
        <tr>
          <th scope="row">25</th>
          <td>2018-10-12</td>
          <td>28800</td>
          <td>64400</td>
          <td>90300</td>
          <td>142000</td>
          <td>101000</td>
        </tr>
      </tbody>
    </table>

    <script src="utils.js"></script>
    <script src="csvdata_all.js"></script>
    <script>
      const selNames = ['KT', 'LG전자', '삼성생명', '네이버', '카카오'];
      const csv = getCsvData();
      //console.log(csv);
      const json = csv2json(csv);
      //console.log(json[0]);
      const sel = filterName(json, 'name', selNames);
      const rows = groupByDate(sel);
      console.log(rows);

      for (let i = 0; i < rows.length; i++) {// row count
        const da = rows[i]['date'];
        const cols = rows[i]['cols'];

        let tabrow = '<tr>' + '<td style="width: 10%">' + da + '</td>';
        for (let j = 0; j < cols.length; j++) {// col count
          tabrow =
            tabrow + '<td style="width:18%; text-align:center;">' + cols[j]['price'] + '</td>';
        }
        tabrow += '</tr>';
        $('#tbody').append(tabrow);// using jQuery
      }
    </script>
  </body>
</html>
